<launch>
	<!-- Skip long wait on config server, not needed here -->
	<param name="config_server/enabled" value="false" />

	<node name="sender" pkg="nimbro_topic_transport" type="udp_sender" output="screen">
		<!-- Destination: localhost -->
		<param name="destination_addr" value="localhost" />
		<param name="destination_port" value="5777" />
		<param name="source_port" value="5776" />

		<param name="fec" value="0.5" />

		<!-- Load topics from yaml file -->
		<rosparam command="load" file="$(find nimbro_topic_transport)/test/topics.yaml" />
	</node>

	<node name="receiver" pkg="nimbro_topic_transport" type="udp_receiver" output="screen">
		<param name="port" value="5777" />
		<param name="fec" value="true" />
		<remap from="/test_topic" to="/receive/test_topic" />
		<remap from="/array_topic" to="/receive/array_topic" />
	</node>

	<test test-name="test_udp_fec" pkg="nimbro_topic_transport" type="test_comm">
	</test>
</launch>
